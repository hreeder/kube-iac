---
meta:
  name: grafana
  chart: stable/grafana

ingress:
  enabled: true
  hosts:
    - grafana.tbrb.dev

plugins:
  - grafana-piechart-panel

envFromSecret: grafana-env

grafana.ini:
  paths:
    data: /var/lib/grafana/data
    logs: /var/log/grafana
    plugins: /var/lib/grafana/plugins
    provisioning: /etc/grafana/provisioning
  server:
    root_url: https://grafana.tbrb.dev
  analytics:
    check_for_updates: true
  log:
    mode: console
  grafana_net:
    url: https://grafana.net
  auth.generic_oauth:
    name: id.tbrb.dev
    enabled: true
    client_id: grafana
    scopes: openid email name
    auth_url: https://id.tbrb.dev/auth/realms/tbrb-dev/protocol/openid-connect/auth
    token_url: https://id.tbrb.dev/auth/realms/tbrb-dev/protocol/openid-connect/token
    api_url: https://id.tbrb.dev/auth/realms/tbrb-dev/protocol/openid-connect/userinfo

datasources:
 datasources.yaml:
   apiVersion: 1
   datasources:
   - name: Prometheus
     type: prometheus
     url: http://prometheus-server
     access: proxy
     isDefault: true

dashboards:
  traefik-by-backend:
    gnetId: 4475
    revision: 4
    datasource: Prometheus
